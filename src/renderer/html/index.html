<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'">
  <title>Pumpium - Appium Server GUI Manager</title>
  <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
  <main class="main">
    <div class="main-topbar">
      <div class="toolbar-left">
        <div class="toolbar-dropdown-wrap">
          <button type="button" id="btn-lang" class="btn-toolbar" data-i18n-title="toolbar.langTitle" aria-label="Language" aria-haspopup="true" aria-expanded="false">RU</button>
          <div id="lang-dropdown" class="toolbar-dropdown hidden" role="listbox">
            <button type="button" class="toolbar-dropdown-item" data-lang="ru" data-i18n="lang.ru" role="option">Russian</button>
            <button type="button" class="toolbar-dropdown-item" data-lang="en" data-i18n="lang.en" role="option">English</button>
          </div>
        </div>
        <div class="toolbar-dropdown-wrap">
          <button type="button" id="btn-theme" class="btn-toolbar" data-i18n-title="toolbar.themeTitle" aria-label="Theme" aria-haspopup="true" aria-expanded="false"><span class="icon-theme-emoji" aria-hidden="true">ðŸ‘•</span></button>
          <div id="theme-dropdown" class="toolbar-dropdown hidden" role="listbox">
            <button type="button" class="toolbar-dropdown-item" data-theme="darcula" data-i18n="theme.darcula" role="option">Darcula</button>
            <button type="button" class="toolbar-dropdown-item" data-theme="macosDark" data-i18n="theme.macosDark" role="option">macOS Dark</button>
            <button type="button" class="toolbar-dropdown-item" data-theme="quiteLight" data-i18n="theme.quiteLight" role="option">Quite Light</button>
          </div>
        </div>
      </div>
      <div class="toolbar-center">
        <h2 id="panel-heading" class="panel-heading" data-i18n="toolbar.headingLocal">Local launch</h2>
      </div>
      <div class="toolbar-right">
        <button type="button" id="btn-appium-status" class="btn-toolbar btn-appium-status" title="Appium status" aria-label="Appium status" data-state="loading">
          <span class="status-loading">
            <svg class="icon-hourglass" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16v6l-4 4 4 4v6H4v-6l4-4-4-4V4z"/><path d="M4 10l4 4 4-4"/><path d="M16 14l-4 4-4-4"/></svg>
          </span>
          <span class="status-dot status-dot-detected"></span>
          <span class="status-dot status-dot-not-detected"></span>
        </button>
        <button type="button" id="btn-tab-local" class="btn-tab-type" data-i18n-title="toolbar.tabToggleTitleLocal" aria-label="Local" data-type="local">
          <svg class="tab-type-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/>
          </svg>
          <span class="tab-type-label" data-i18n="toolbar.tabLabelLocal">Local</span>
        </button>
        <button type="button" id="btn-tab-remote" class="btn-tab-type" data-i18n-title="toolbar.tabToggleTitleRemote" aria-label="Remote" data-type="remote">
          <svg class="tab-type-icon" viewBox="0 0 21.8 21.8" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <rect x="8" y="2" width="13" height="10" rx="0.5"/>
            <line x1="14" y1="12" x2="14" y2="13.5"/>
            <rect x="2" y="7" width="14" height="10" rx="1" fill="currentColor"/>
            <line x1="9" y1="17" x2="9" y2="20"/><line x1="7" y1="20" x2="11" y2="20"/>
          </svg>
          <span class="tab-type-label" data-i18n="toolbar.tabLabelRemote">Remote</span>
        </button>
      </div>
    </div>
    <div id="tab-strip" class="tab-strip" role="tablist"></div>
    <div id="tab-content" class="tab-content"></div>
  </main>

  <template id="panel-local-tpl">
    <section class="panel tab-panel" data-type="local" role="tabpanel">
      <div class="config">
        <div class="config-inner">
          <div class="config-left">
            <div class="row inputs-row">
              <label class="field field-address">
                <span data-i18n="form.address">Address</span>
                <div class="field-with-reset">
                  <button type="button" class="btn-reset" data-ref="btn-reset-defaults" data-i18n-title="form.btnResetTitle" aria-label="Reset">
                    <svg class="icon-refresh" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 4v6h-6"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
                  </button>
                  <input type="text" data-ref="address" value="0.0.0.0" placeholder="0.0.0.0">
                </div>
              </label>
              <label class="field">
                <span data-i18n="form.port">Port</span>
                <input type="number" data-ref="port" value="4723" placeholder="4723" min="1" max="65535">
              </label>
            </div>
            <div class="row actions-row">
              <button type="button" data-ref="btn-start" class="btn btn-primary" data-i18n="form.btnStart">Start</button>
              <button type="button" data-ref="btn-stop" class="btn btn-secondary" disabled data-i18n="form.btnStop">Stop</button>
            </div>
          </div>
          <div class="config-right">
            <label class="checkbox-row"><input type="checkbox" data-ref="allow-cors"><span data-i18n="form.allowCors">--allow-cors</span></label>
            <label class="checkbox-row"><input type="checkbox" data-ref="relaxed-security"><span data-i18n="form.relaxedSecurity">--relaxed-security</span></label>
            <label class="checkbox-row"><input type="checkbox" data-ref="session-override"><span data-i18n="form.sessionOverride">--session-override</span></label>
            <label class="checkbox-row"><input type="checkbox" data-ref="allow-insecure"><span data-i18n="form.allowInsecure">--allow-insecure</span></label>
          </div>
        </div>
      </div>
      <div class="log-section">
        <div class="log-toolbar">
          <span class="log-label" data-i18n="log.label">Server log</span>
          <label class="filter-cb"><input type="checkbox" data-ref="filter-4xx"> <span data-i18n="log.filter4xx">4xx only</span></label>
          <label class="filter-cb"><input type="checkbox" data-ref="filter-5xx"> <span data-i18n="log.filter5xx">5xx only</span></label>
          <button type="button" data-ref="log-search-btn" class="btn-log-search" data-i18n-title="log.searchTitle" aria-label="Search">
            <svg class="icon-search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
          </button>
        </div>
        <div data-ref="log-search-bar" class="log-search-bar hidden">
          <input type="text" data-ref="log-search-input" class="log-search-input" data-i18n-placeholder="log.searchPlaceholder" placeholder="Searchâ€¦" autocomplete="off">
          <button type="button" data-ref="log-search-prev" class="btn-log-search-nav" data-i18n-title="log.searchPrevTitle">â†‘</button>
          <button type="button" data-ref="log-search-next" class="btn-log-search-nav" data-i18n-title="log.searchNextTitle">â†“</button>
          <span data-ref="log-search-count" class="log-search-count"></span>
          <button type="button" data-ref="log-search-close" class="btn-log-search-close" data-i18n-title="log.searchCloseTitle">Ã—</button>
        </div>
        <pre data-ref="log-output" class="log-output"></pre>
      </div>
    </section>
  </template>

  <template id="panel-remote-tpl">
    <section class="panel tab-panel" data-type="remote" role="tabpanel">
      <div class="config">
        <div class="row inputs-row">
          <label class="field field-wide">
            <span data-i18n="remote.urlLabel">Server URL</span>
            <input type="text" data-ref="remote-url" value="http://127.0.0.1:4723" data-i18n-placeholder="remote.urlPlaceholder" placeholder="http://host:4723">
          </label>
        </div>
        <div class="row actions-row">
          <button type="button" data-ref="btn-connect-remote" class="btn btn-primary" data-i18n="remote.connect">Connect</button>
        </div>
      </div>
      <div class="log-section">
        <div class="log-toolbar">
          <span class="log-label" data-i18n="log.labelShort">Log</span>
        </div>
        <pre data-ref="log-output-remote" class="log-output" data-i18n="remote.logPlaceholder">Connect to a remote server to view the log (in development).</pre>
      </div>
    </section>
  </template>

  <div id="appium-servers-modal" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal-box" role="dialog" aria-labelledby="appium-modal-title">
      <h3 id="appium-modal-title" class="modal-title"></h3>
      <ul id="appium-modal-list" class="modal-list"></ul>
      <div class="modal-actions">
        <button type="button" id="appium-modal-kill-all" class="btn btn-primary"></button>
      </div>
    </div>
  </div>

  <script src="../config/config.js"></script>
  <script src="../themes/themes.js"></script>
  <script src="../i18n/i18n.js"></script>
  <script src="../js/constants.js"></script>
  <script src="../js/utils.js"></script>
  <script src="../js/dom.js"></script>
  <script src="../js/log.js"></script>
  <script src="../js/toolbar.js"></script>
  <script src="../js/tabs-local.js"></script>
  <script src="../js/tabs-remote.js"></script>
  <script src="../js/tabs.js"></script>
  <script src="../js/appium-status.js"></script>
  <script src="../js/form.js"></script>
  <script src="../js/app.js"></script>
</body>
</html>
